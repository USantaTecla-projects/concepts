<mat-card class="card">
  <mat-card-title-group class="card-title">
    <mat-card-title>{{ title }}</mat-card-title>
  </mat-card-title-group>
  <mat-card-content class="items" *ngIf="state === 'init' || state === 'normal'; else noContent">
    <mat-accordion>
      <mat-expansion-panel class="item-panel" *ngFor="let item of items" (opened)="selectItem(item.id)">
        <mat-expansion-panel-header>
          <mat-panel-title class="item-title"> {{ item.text | titlecase | shortText: 100 }}</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="container">
          <div class="form-container">
            <ng-container *ngTemplateOutlet="formEdit || defaultForm; context: { $implicit: item }"> </ng-container>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <app-loading></app-loading>
  </mat-card-content>
</mat-card>

<ng-template #noContent>
  <mat-spinner *ngIf="state === 'loading'"></mat-spinner>
  <span *ngIf="state === 'empty'">No {{ title }} to display</span>
</ng-template>

<!-- If no template is provided use keys as headers and display all values -->
<ng-template #defaultForm>
  <p>No form</p>
</ng-template>
