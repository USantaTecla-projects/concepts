"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[209],{3209:(F,l,o)=>{o.r(l),o.d(l,{CorrectionInCourseModule:()=>U});var a=o(9808),C=o(1994),h=o(3075),v=o(3607),e=o(5e3);let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,C.q,v.m,h.UX]]}),n})();var m=o(1787),x=o(4004),M=o(5310),I=o(9390),d=o(3278),O=o(9970),Q=o(4607),R=o(2350),P=o(2138),b=o(4594),S=o(5245),u=o(1125);let f=(()=>{class n{constructor(t){this.viewContainerRef=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b))},n.\u0275dir=e.lG2({type:n,selectors:[["","appQuestionHost",""]]}),n})();function T(n,r){}let q=(()=>{class n{constructor(){}ngOnInit(){this.createDynamicComponent()}createDynamicComponent(){var t;const i=this.questionHost.viewContainerRef;i.clear();const s=i.createComponent(this.componentType);s.instance.question=this.question,s.instance.questionNumber=this.questionNumber,s.instance.answer=this.answer,s.instance.userID=null!==(t=this.userID)&&void 0!==t?t:0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-question-renderer"]],viewQuery:function(t,i){if(1&t&&e.Gf(f,7),2&t){let s;e.iGM(s=e.CRH())&&(i.questionHost=s.first)}},inputs:{componentType:"componentType",question:"question",answer:"answer",questionNumber:"questionNumber",userID:"userID"},decls:1,vars:0,consts:[["appQuestionHost",""]],template:function(t,i){1&t&&e.YNc(0,T,0,0,"ng-template",0)},directives:[f],styles:["[_nghost-%COMP%]{width:50%}"]}),n})();var Z=o(7423);function B(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"app-correction-question-renderer",8),e.ALo(2,"async"),e.BQk()),2&n){const t=r.$implicit,i=r.index,s=e.oxw();let c;e.xp6(1),e.Q6J("componentType",t.question.correctionComponentType)("question",t.question)("questionNumber",i+1)("answer",t.answer)("userID",null==(c=e.lcZ(2,5,s.user$))?null:c.id)}}const D=[{path:"",component:(()=>{class n{constructor(t,i,s,c,p){this.router=t,this.correctionQuestionReplierService=i,this.correcionInCourseStore=s,this.authStore=c,this.snackbarService=p}ngOnInit(){this.exam$=this.correcionInCourseStore.correctionInCourse$,this.examResponses$=this.exam$.pipe((0,x.U)(({questionList:i,answerList:s})=>s.map(c=>{const{questionID:p}=c,g=i.find(({id:A})=>A===p);return g?{question:g,answer:c}:{question:{id:0,type:I.e.TYPE0,examComponentType:M.k,correctionComponentType:O.i},answer:c}}))),this.user$=this.authStore.user$;const t=this.correcionInCourseStore.getNumberOfQuestions();t||this.router.navigateByUrl("/correction"),this.correctionQuestionReplierService.setNumberOfQuestions(t)}saveCorrection(){const t=this.correctionQuestionReplierService.getCorrectedQuestions();return t.length===this.correcionInCourseStore.getNumberOfQuestions()?this.correcionInCourseStore.updateExam(t).subscribe({next:()=>{this.snackbarService.openSnackBar("Exam corrected!"),this.router.navigateByUrl("/correction")},error:i=>this.snackbarService.openSnackBar(i.message)}):this.snackbarService.openSnackBar("All questions should be corrected to finish")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0),e.Y36(d.U),e.Y36(Q.m),e.Y36(R.C),e.Y36(P.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-in-course"]],features:[e._Bn([d.U])],decls:19,vars:5,consts:[["color","primary",1,"tool-bar"],["mat-button","","disabled",""],[1,"icon"],[1,"container"],["hideToggle","",3,"disabled","expanded"],["expandedHeight","8rem"],[4,"ngFor","ngForOf"],["data-cy","correction-correct-exam-button","mat-raised-button","","color","primary",3,"click"],[1,"question",3,"componentType","question","questionNumber","answer","userID"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"mat-icon",2),e._uU(3,"draw"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"Correction"),e.qZA()()(),e.TgZ(6,"div",3)(7,"mat-accordion")(8,"mat-expansion-panel",4)(9,"mat-expansion-panel-header",5)(10,"mat-panel-title")(11,"mat-icon",2),e._uU(12,"edit_note"),e.qZA(),e.TgZ(13,"h3"),e._uU(14,"Pending exams"),e.qZA()()(),e.YNc(15,B,3,7,"ng-container",6),e.ALo(16,"async"),e.TgZ(17,"button",7),e.NdJ("click",function(){return i.saveCorrection()}),e._uU(18," Correct exam "),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("disabled",!0)("expanded",!0),e.xp6(7),e.Q6J("ngForOf",e.lcZ(16,3,i.examResponses$)))},directives:[b.Ye,S.Hw,u.pp,u.ib,u.yz,u.yK,a.sg,q,Z.lW],pipes:[a.Ov],styles:[".container[_ngcontent-%COMP%]{margin:3rem 18rem}.container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{background-color:#673ab7}.container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[aria-disabled=true][_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;margin-left:.75rem}.container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:2.5rem}.container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.5rem;font-size:1.5rem;font-weight:500}.container[_ngcontent-%COMP%]     .mat-expansion-panel-body{background-color:#fff!important}.no-exam[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(D)],m.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,C.q,N,y]]}),n})()}}]);